---
layout: post
title: "[Docker] Docker란?"
categories: posts
tags: docker
---

# [Docker] Docker란?

## Docker

+ [Docker 관련문서](https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html)

## Docker 도커란?
	+ 컨테이너 기반의 오픈소스 가상화 플랫폼이다.
	+ 다양한 프로그램, 실행환경을 컨테이너로 추상화하고 동일한 인터페이스를 제공하여 프로그램의 배포 및 관리를 단순하게 해준다.
	+ 백엔드 프로그램, 데이터베이스 서버, 메시지 큐등 어떤 프로그램도 컨테이너로 추상화 할수있음.

## 컨테이너(Container)

	+ 컨테이너는 격리된 공간에서 프로세스가 동작하는 기술

>도커의 기본 네트워크 모드는 Bridge모드로 약간의 성능 손실이 있습니다. 네트워크 성능이 중요한 프로그램의 경우 --net=host 옵션을 고려해야 합니다.

+ 실행중인 컨테이너에 접속하여 명령어를 입력할수 있다
+ `apt-get, yum`으로 패키지를 설치할수 있다
+ 사용자도 추가하고 여러개의 프로세스를 백그라운드로 실행 할수도 있음
+ CPU나 메모리 사용량을 제한 할 수 있다
+ 호스트의 특정 포트와 연결하거나 호스트의 특정 디렉토리를 내부 디렉토리인 것처럼 사용할수 있다


## 이미지(Image)

+ 도커에서 가장 중요한 개념은 컨테이너와 함께 이미지라는 개념이다.
+ 이미지는 `컨테이너 실행에 필요한 파일과 설정값등을 포함하고 있는것`으로 상태값을 가지지 않고 변하지 않는다(Immutable)
+ 컨테이너는 이미지를 실행한 상태라고 볼 수 있고 추가되거나 변하는 값은 컨테이너에 저장된다
+ 같은 이미지에서 여러개의 컨테이너를 생성할수 있다
+ 컨테이너의 상태가 바뀌거나 컨테이너가 삭제되더라도 이미지는 변하지 않고 그대로 남아 있음

## 레이어 저장방식

+ 유니온 파일 시스템을 이용하여 여러개의 레이어를 하나의 파일시스템으로 사용할 수 있게 해줌
+ 이미지는 여러개의 읽기 전용`read only` 레이어로 구성되고 파일이 추가되거나 수정되면 새로운 레이어가 생성된다

```
예)

ubuntu 이미지가 A + B + C의 집합이라면, ubuntu 이미지를 베이스로 만든 nginx 이미지는 
A + B + C + nginx가 된다. 

webapp 이미지를 nginx 이미지 기반으로 만들었다면 예상대로 A + B + C + nginx + source 레이어로 구성된다. 

webapp 소스를 수정하면 A, B, C, nginx 레이어를 제외한 새로운 source(v2) 
레이어만 다운받으면 되기 때문에 굉장히 효율적으로 이미지를 관리할 수 있다.
```

+ 컨테이너를 생성할 때도 레이어 방식을 사용하는데 기존의 이미지 레이어 위에 읽기/쓰기 `read-write`레이어를 추가함
+ 이미지 레이어를 그대로 사용하면서 컨테이너가 실행중에 생성하는 파일이나 변경된 내용은 읽기/쓰기 레이어에 저장되므로 여러개의 컨테이너를 생성해도 `최소한의 용량만 사용`한다.


## 이미지 경로

+ 이미지는 URL방식으로 관리하며 태그를 붙일 수 있다

> ubuntu 14.04 이미지는 docker.io/library/ubuntu:14.04 또는 docker.io/library/ubuntu:trusty 이고 docker.io/library는 생략가능하여 ubuntu:14.04 로 사용할 수 있습니다. 이러한 방식은 이해하기 쉽고 편리하게 사용할 수 있으며 태그 기능을 잘 이용하면 테스트나 롤백도 쉽게 할 수 있다.



## Dockerfile

+ 도커는 이미지를 만들기 위해 `Dockerfile` 이라는 파일에 자체 DSL(Domain-Specific-Language)
언어를 이용하여 이미지 생성 과정을 적는다


## Docker Hub

+ 공개 이미지를 무료로 관리해줌

## Command, API

+ 컨테이너의 복잡한 시스템 구성을 이해하지 못하더라도 편하게 사용할수 있음
+ Http 기반의 Rest API도 지원하여 확장성이 좋다






